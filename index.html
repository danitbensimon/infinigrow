<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Drag-and-Drop Puzzle Game</title>
<style>
    /* Basic styling */
    body {
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    h1 {
        margin: 20px;
    }
    #timer {
        font-size: 20px;
        margin: 10px;
    }
    .chart-container {
        display: flex;
        justify-content: space-around;
        width: 80%;
        margin-top: 20px;
    }
    .chart {
        width: 150px;
        height: 150px;
        border: 1px solid #ccc;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        font-size: 20px;
        font-weight: bold;
    }
    .draggable {
        cursor: pointer;
        position: absolute;
        padding: 10px;
        background-color: #ffa;
        border: 1px solid #ccc;
    }
</style>
</head>
<body>

<h1>Fix the Charts Puzzle Game</h1>
<div id="timer">Time left: <span id="timeLeft">30</span> seconds</div>

<div class="chart-container">
    <!-- Each chart has a placeholder for a missing piece -->
    <div class="chart" id="barChart" ondrop="drop(event)" ondragover="allowDrop(event)">Bar Chart</div>
    <div class="chart" id="pieChart" ondrop="drop(event)" ondragover="allowDrop(event)">Pie Chart</div>
    <div class="chart" id="lineChart" ondrop="drop(event)" ondragover="allowDrop(event)">Line Chart</div>
    <div class="chart" id="areaChart" ondrop="drop(event)" ondragover="allowDrop(event)">Area Chart</div>
</div>

<!-- Draggable misplaced pieces -->
<div class="chart-container">
    <div id="barPiece" class="draggable" draggable="true" ondragstart="drag(event)">Bar Piece</div>
    <div id="piePiece" class="draggable" draggable="true" ondragstart="drag(event)">Pie Piece</div>
    <div id="linePiece" class="draggable" draggable="true" ondragstart="drag(event)">Line Piece</div>
    <div id="areaPiece" class="draggable" draggable="true" ondragstart="drag(event)">Area Piece</div>
</div>

<!-- JavaScript for game logic -->
<script>
    let timer;
    let timeLeft = 30;

    // Start the timer
    function startTimer() {
        timer = setInterval(function() {
            timeLeft--;
            document.getElementById('timeLeft').innerText = timeLeft;
            if (timeLeft <= 0) {
                clearInterval(timer);
                alert("Time's up! Try again.");
                resetGame();
            }
        }, 1000);
    }
    startTimer();

    // Drag and Drop functions
    function allowDrop(event) {
        event.preventDefault();
    }

    function drag(event) {
        event.dataTransfer.setData("text", event.target.id);
    }

    function drop(event) {
        event.preventDefault();
        let draggedElementId = event.dataTransfer.getData("text");
        let targetId = event.target.id;

        // Define correct placements
        const correctPlacements = {
            barPiece: "barChart",
            piePiece: "pieChart",
            linePiece: "lineChart",
            areaPiece: "areaChart"
        };

        if (correctPlacements[draggedElementId] === targetId) {
            event.target.appendChild(document.getElementById(draggedElementId));
            document.getElementById(draggedElementId).classList.add('placed'); // visually indicate correct placement
            checkWinCondition();
        } else {
            alert("Incorrect placement! Try again.");
        }
    }

    // Check if all pieces are correctly placed
    function checkWinCondition() {
        let placedPieces = document.querySelectorAll('.placed');
        if (placedPieces.length === 4) {
            clearInterval(timer);
            alert("Congratulations! You fixed all the data! You won Infinigrow Swag!");
            resetGame();
        }
    }

    // Reset game
    function resetGame() {
        document.querySelectorAll('.draggable').forEach(piece => {
            piece.classList.remove('placed');
            document.body.appendChild(piece); // return pieces to initial position
        });
        timeLeft = 30;
        document.getElementById('timeLeft').innerText = timeLeft;
        startTimer();
    }
</script>

</body>
</html>
